{"version":3,"sources":["js/api-service.js","js/gallery.js","index.js"],"names":["ApiService","constructor","page","query","id","fetchGenres","genresParams","URLSearchParams","api_key","fetch","BASE_URL","then","res","ok","json","Error","fetchTrending","trendingParams","fetchQuery","queryParams","include_adult","year","fetchMovieById","idParams","q","qValue","split","join","movId","idValue","Number","incrementPage","resetPage","api","genres","data","console","log","getTrendingMovies","saveGenresList","renderMovies","catch","err","message","results","normilizedResults","map","movie","releaseYear","Date","parse","release_date","getFullYear","iconFullPath","poster_path","poster","emptyImg","genresNames","genre_ids","find","x","name"],"mappings":"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","file":"src.cd95e7ae.js","sourceRoot":"../src","sourcesContent":["export default class ApiService {\n  #API_KEY = '43599aecc4a107996f3426684f8b9f50';\n  BASE_URL = 'https://api.themoviedb.org/3';\n\n  constructor() {\n    this.page = 1;\n    this.query = '';\n    this.id = 0;\n  }\n  fetchGenres() {\n    const genresParams = new URLSearchParams({\n      api_key: this.#API_KEY,\n    });\n\n    return fetch(`${this.BASE_URL}/genre/movie/list?${genresParams}`).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      throw new Error('Something went wrong');\n    });\n  }\n  // ttps://api.themoviedb.org/3/genre/movie/list?api_key=43599aecc4a107996f3426684f8b9f50&language=en-US\n  fetchTrending() {\n    const trendingParams = new URLSearchParams({\n      api_key: this.#API_KEY,\n      page: this.page,\n    });\n\n    return fetch(`${this.BASE_URL}/trending/movie/week?${trendingParams}`).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      throw new Error('Something went wrong');\n    });\n  }\n\n  fetchQuery() {\n    const queryParams = new URLSearchParams({\n      api_key: this.#API_KEY,\n      page: this.page,\n      query: this.query,\n      include_adult: false,\n      year: 2021,\n    });\n\n    return fetch(`${this.BASE_URL}/search/movie?${queryParams}`).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      throw new Error('Something went wrong');\n    });\n  }\n\n  fetchMovieById() {\n    const idParams = new URLSearchParams({\n      api_key: this.#API_KEY,\n    });\n\n    return fetch(`${this.BASE_URL}/movie/${this.id}?${idParams}`).then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      throw new Error('Something went wrong');\n    });\n  }\n\n  set q(qValue) {\n    this.query = qValue.split(' ').join('%20');\n  }\n\n  set movId(idValue) {\n    this.id = Number(idValue);\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n}\n// https://api.themoviedb.org/3/trending/movie/week\n// https://api.themoviedb.org/3/movie/550?api_key=43599aecc4a107996f3426684f8b9f50\n// https://api.themoviedb.org/3/search/movie?api_key=43599aecc4a107996f3426684f8b9f50&language=en-US&query=war%20of%20nations&page=1&include_adult=false&region=ukraine&year=2021\n","import ApiService from './api-service';\n// import makeMoviesMarkup from '../templates/moveList.hbs';\n// import Handlebars from 'handlebars';\n\nconst api = new ApiService();\nlet genres = [];\nconst fetch = () => {\n  api.fetchGenres().then(data => {\n    console.log(data);\n    getTrendingMovies();\n    return saveGenresList(data);\n  });\n};\nconst saveGenresList = data => {\n  genres = [...data.genres];\n};\nconsole.log(genres);\nfetch();\n\nconst getTrendingMovies = () => {\n  api\n    .fetchTrending()\n    .then(data => {\n      // console.log(data);\n      renderMovies(data);\n    })\n    .catch(err => {\n      console.log(err.message);\n    });\n};\n\nconst renderMovies = ({ results }) => {\n  const normilizedResults = results.map(movie => {\n    let releaseYear = 'Unknown';\n    if (Date.parse(movie.release_date)) {\n      releaseYear = new Date(movie.release_date).getFullYear();\n    }\n    const iconFullPath = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n    const poster = movie.poster_path ? iconFullPath : emptyImg;\n    // console.log(genres);\n    // console.log(movie.genre_ids);\n    const genresNames = movie.genre_ids.map(id => genres.find(x => x.id === id).name).join(', ');\n    return {\n      ...movie,\n      release_date: releaseYear,\n      poster_path: poster,\n      genres: genresNames,\n    };\n  });\n  console.log(normilizedResults);\n  // console.log(makeMoviesMarkup);\n  // const markup = makeMoviesMarkup(normilizedResults);\n  // refs.output.insertAdjacentHTML('beforeend', markup);\n};\n\n// const fetchTr = () => {\n//   api.fetchTrending().then(data => {\n//     console.log(data);\n//   });\n// };\n// fetchTr();\n\n// const fetch = () => {\n//   api.q = 'war';\n//   api.fetchQuery().then(data => {\n//     console.log(data);\n//   });\n// };\n\n// const fetch = () => {\n//   api.movid = 55;\n//   api.fetchMovieById().then(data => {\n//     console.log(data);\n//   });\n// };\n","import './sass/main.scss';\nimport './js/api-service';\nimport './js/gallery';\n"]}